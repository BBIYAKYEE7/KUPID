<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고려대학교 포털</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        @font-face {
            font-family: 'Pretendard';
            src: local('Pretendard'), local('Pretendard-Regular'), local('Pretendard Regular');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Pretendard';
            src: local('Pretendard-Bold'), local('Pretendard Bold'), local('PretendardBold');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        
        * {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        }
        
        body, html {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        }
        
        button, input, textarea, select, a, span, div, p, h1, h2, h3, h4, h5, h6 {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        }
        
        .top-status-bar, .status-content, .session-info, .status-controls, .session-timer, .session-progress, .session-progress-fill, .login-settings-btn, .refresh-btn, .home-btn {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        }
        
        .modal, .modal-content, .modal-header, .modal-body, .modal-footer, .btn, .form-group, label, input, textarea, select {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
        }
    </style>
</head>
<body>
    <!-- 고정된 상단 상태 바 -->
    <div id="top-status-bar" class="top-status-bar">
        <div class="status-content">
            <div class="app-logo">
                <img src="./images/logo3.png" alt="고려대학교 로고" class="ku-logo-small">
                <img src="./images/emblem4.png" alt="고려대학교 엠블럼" class="ku-emblem-small">
            </div>
            <div class="session-info">
                <span id="session-timer" class="session-timer">세션: 30:00</span>
                <div class="session-progress">
                    <div id="session-progress-bar" class="session-progress-fill"></div>
                </div>
            </div>
            <div class="status-controls">
                <button id="login-settings-btn" class="login-settings-btn">
                    🔐 로그인 설정
                </button>
                <button id="refresh-btn" class="refresh-btn">새로고침</button>
                <button id="home-btn" class="home-btn">홈으로</button>
                <button id="update-btn" class="update-btn" style="display: none;">
                    🔄 업데이트
                </button>
            </div>
        </div>
    </div>

    <!-- 메인 콘텐츠 영역 -->
    <div id="main-content" class="main-content">
        <!-- 웹뷰 컨테이너 -->
        <div id="webview-container" class="webview-container">
            <webview id="portal-webview" src="https://portal.korea.ac.kr/front/Main.kpd"
                     class="portal-webview" 
                     webpreferences="contextIsolation=yes,nodeIntegration=no,preload=./webview-preload.js"
                     disablewebsecurity="true" 
                     allowpopups="false"></webview>
        </div>
    </div>

    <!-- 세션 만료 경고 모달 -->
    <div id="session-warning-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>세션 만료 경고</h3>
            </div>
            <div class="modal-body">
                <p>세션이 곧 만료됩니다. 계속 사용하시겠습니까?</p>
                <div class="countdown" id="countdown">5:00</div>
            </div>
            <div class="modal-footer">
                <button id="extend-session-btn" class="btn btn-primary">세션 연장</button>
                <button id="close-modal-btn" class="btn btn-secondary">닫기</button>
            </div>
        </div>
    </div>

    <!-- 로그인 설정 모달 -->
    <div id="login-settings-modal" class="modal hidden">
        <div class="modal-content setup-modal">
            <div class="modal-header">
                <div class="logo-container">
                    <img src="./images/logo3.png" alt="고려대학교 로고" class="ku-logo">
                    <img src="./images/emblem4.png" alt="고려대학교 엠블럼" class="ku-emblem">
                </div>
                <div class="slogan-container">
                    <img src="./images/kuni120-1.png" alt="고려대학교 슬로건" class="ku-slogan">
                </div>
            </div>
            <div class="modal-body">
                <form id="login-settings-form" class="setup-form">
                    <div class="form-group">
                        <label for="username">아이디</label>
                        <input type="text" id="username" name="username" placeholder="고려대학교 아이디" required>
                    </div>
                    <div class="form-group">
                        <label for="password">비밀번호</label>
                        <input type="password" id="password" name="password" placeholder="비밀번호" required>
                    </div>
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="auto-login" name="autoLogin">
                            <span>자동 로그인</span>
                        </label>
                    </div>
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="remember-credentials" name="rememberCredentials">
                            <span>로그인 정보 저장</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer form-actions">
                <button id="save-login-settings-btn" class="btn btn-primary">저장</button>
                <button id="clear-login-settings-btn" class="btn btn-danger">정보 삭제</button>
                <button id="close-login-settings-btn" class="btn btn-secondary">닫기</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
